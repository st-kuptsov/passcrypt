# PassCrypt CLI

Командная утилита для генерации и управления библиотекой PassCrypt.

## Использование

```bash
go run main.go <command> [arguments]
```

## Команды

### init

Выполняет полную генерацию библиотеки с новыми ключами.

```bash
go run main.go init <output_directory>
```

- Генерирует RSA-ключи
- Создает XOR-маску
- Разделяет приватный ключ на фрагменты
- Записывает все файлы в указанную директорию

### update

Обновляет только файлы шаблонов, сохраняя существующие ключи.

```bash
go run main.go update <output_directory>
```

- Перезаписывает файлы шаблонов
- Сохраняет существующие файлы с ключами

### rekey

Генерирует новые ключи, сохраняя существующие файлы шаблонов.

```bash
go run main.go rekey <output_directory>
```

- Генерирует новые RSA-ключи
- Создает новую XOR-маску
- Разделяет новый приватный ключ на фрагменты
- Записывает новые файлы с ключами

### obfuscate

Выполняет обфускацию сгенерированной библиотеки с помощью garble.

```bash
go run main.go obfuscate <library_directory>
```

- Использует garble для обфускации кода
- Требует установленного garble

## Структура генерируемых файлов

```
output_directory/
├── passcrypt.go          # Основная библиотека шифрования
├── secure_embed.go       # Безопасное встраивание ключей
└── embedded_keys.go     # Встроенные фрагменты ключей (автогенерируемый)
```

## Безопасность

- При генерации создается секретный seed (fragmentPasswordSeed) для вычисления пароля фрагмента
- Каждый фрагмент шифруется с уникальным ключом, вычисленным на основе fragmentPasswordSeed
- Для восстановления ключа необходимы все реальные фрагменты в правильном порядке